<!-- contracts-list.html -->
<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <title>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏ç‡∏ç‡∏≤ - Praweena Property</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/js/env-loader.js"></script>




  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicon/site.webmanifest">

  <style>
    /* Filter Bar Overrides */
    .filter-bar {
      justify-content: flex-start;
      align-items: center;
    }

    /* Fix alignment */
    .search-wrap {
      position: relative;
      flex: 1;
      min-width: 260px;
    }

    .search-wrap input.form-control {
      padding-left: 2.2rem;
    }

    .search-ic {
      position: absolute;
      left: 0.8rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1rem;
      color: #9ca3af;
      pointer-events: none;
    }

    /* Ensure button matches input height */
    .filter-actions .btn {
      height: 46px;
      /* Match form-control height typically */
      display: flex;
      align-items: center;
    }

    .contracts-grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      align-items: stretch;
    }

    .contract-card {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: .5rem;
    }

    .contract-title {
      font-weight: 700;
      font-size: 1.05rem;
    }

    .contract-meta {
      font-size: .9rem;
      color: #6b7280;
      line-height: 1.5;
    }

    .contract-actions {
      margin-top: auto;
      display: flex;
      gap: .5rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: .35rem;
      font-size: .8rem;
      font-weight: 600;
      padding: .2rem .55rem;
      border-radius: 999px;
      background: #f6f6f6;
      border: 1px solid #eee;
      color: #444;
      width: max-content;
    }
  </style>
</head>


<body data-page="contracts">
  <!-- üîπ ‡πÉ‡∏´‡πâ load-header.js ‡∏°‡∏≤‡πÅ‡∏ó‡∏ô header ‡∏ï‡∏≤‡∏¢‡∏ï‡∏±‡∏ß -->


  <main class="page">
    <div class="container">

      <div class="page-header" style="align-items:flex-start;">
        <div class="page-header-left">
          <a href="/admin.html" class="btn btn-secondary">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</a>
          <div>
            <h1>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏ç‡∏ç‡∏≤</h1>
            <div class="page-header-subtitle">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ / ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç / ‡∏≠‡∏≠‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÉ‡∏´‡∏°‡πà</div>
          </div>
        </div>
      </div>

      <div class="filter-bar">
        <div class="filter-input search-wrap">
          <span class="search-ic">üîé</span>
          <input id="contract-search" class="form-control" placeholder="‡∏Ñ‡πâ‡∏ô‡∏ä‡∏∑‡πà‡∏≠ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏ö‡πâ‡∏≤‡∏ô ‡πÄ‡∏ö‡∏≠‡∏£‡πå ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‚Ä¶">
        </div>
        <div class="filter-select">
          <select id="contract-filter-type" class="form-control minw-160">
            <option value="">‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
            <option value="reservation">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡∏≠‡∏á</option>
            <option value="sale">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢</option>
            <option value="lease">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏ä‡πà‡∏≤</option>
            <option value="bin" style="color:red;">üóëÔ∏è ‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞</option>
          </select>
        </div>
        <div class="filter-actions">
          <button id="new-contract-btn" class="btn">+ ‡∏≠‡∏≠‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÉ‡∏´‡∏°‡πà</button>
        </div>
      </div>

      <section id="contracts-grid" class="contracts-grid">
        <!-- JS render -->
      </section>

    </div>
  </main>

  <!-- Contract Modal -->
  <div id="contract-modal" class="modal">
    <div class="modal-content lead-modal-content" style="max-width: 650px;">
      <button class="modal-close" id="modal-close">√ó</button>

      <div class="lead-modal-header">
        <h2>‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤</h2>
        <p class="text-muted">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</p>
      </div>

      <div class="form-vertical-stack" style="display:flex; flex-direction:column; gap:1.5rem;">

        <!-- 1) ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
        <div class="form-section">
          <h3 class="section-title">1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
          <div class="form-group ac-wrap" style="position:relative;">
            <label>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏ä‡∏∑‡πà‡∏≠/‡πÄ‡∏ö‡∏≠‡∏£‡πå/‡∏≠‡∏µ‡πÄ‡∏°‡∏•)</label>
            <input id="lead-search" type="text" class="form-control" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">
            <div id="lead-ac" class="ac-list"></div>
          </div>

          <input type="hidden" id="lead_id">

          <div class="form-group">
            <label>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
            <input id="lead_name" type="text" class="form-control">
          </div>
          <div class="grid grid-cols-2" style="gap:1rem;">
            <div class="form-group">
              <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label>
              <input id="lead_phone" type="text" class="form-control">
            </div>
            <div class="form-group">
              <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
              <input id="lead_email" type="email" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <label>‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label>
            <input id="lead_idcard" type="text" class="form-control">
          </div>
          <div class="form-group">
            <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
            <textarea id="lead_address" class="form-control" rows="2"></textarea>
          </div>
        </div>

        <hr style="border:0; border-top:1px solid #eee; margin:0;">

        <!-- 2) ‡∏ö‡πâ‡∏≤‡∏ô -->
        <div class="form-section">
          <h3 class="section-title">2. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡πâ‡∏≤‡∏ô</h3>
          <div class="form-group">
            <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô</label>
            <select id="property_id" class="form-control">
              <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏ô --</option>
            </select>
          </div>
          <div class="form-group">
            <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡πâ‡∏≤‡∏ô/‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</label>
            <input id="property_name" type="text" class="form-control">
          </div>
          <div class="form-group">
            <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢</label>
            <input id="property_price" type="number" class="form-control">
          </div>
          <div class="form-group">
            <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô</label>
            <textarea id="property_address" class="form-control" rows="2"></textarea>
          </div>
        </div>

        <hr style="border:0; border-top:1px solid #eee; margin:0;">

        <!-- 3) ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤ -->
        <div class="form-section">
          <h3 class="section-title">3. ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤</h3>
          <input type="hidden" id="contract_id">

          <div class="grid grid-cols-2" style="gap:1rem;">
            <div class="form-group">
              <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤</label>
              <input id="contract_date" type="date" class="form-control">
            </div>
            <div class="form-group">
              <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏±‡∏ç‡∏ç‡∏≤</label>
              <select id="contract_type" class="form-control">
                <option value="reservation_sale">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡∏≠‡∏á (‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢)</option>
                <option value="reservation_lease">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡∏≠‡∏á (‡πÄ‡∏ä‡πà‡∏≤)</option>
                <option value="sale">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢</option>
                <option value="lease">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏ä‡πà‡∏≤</option>
              </select>
            </div>
          </div>

          <div class="grid grid-cols-2" style="gap:1rem;">
            <div class="form-group">
              <label>‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≠‡∏á/‡∏°‡∏±‡∏î‡∏à‡∏≥</label>
              <input id="deposit_amount" type="number" class="form-control" placeholder="0">
            </div>
            <div class="form-group">
              <label>‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</label>
              <input id="paid_amount" type="number" class="form-control" placeholder="0">
            </div>
          </div>

          <div class="grid grid-cols-2" style="gap:1rem;">
            <div class="form-group">
              <label>‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</label>
              <input id="remain_amount" type="number" class="form-control" placeholder="0" readonly>
            </div>
            <div class="form-group">
              <label>‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÇ‡∏≠‡∏ô/‡∏ô‡∏±‡∏î‡πÉ‡∏´‡∏ç‡πà</label>
              <input id="transfer_date" type="date" class="form-control">
            </div>
          </div>

          <div class="form-group" style="margin-top:1rem;">
            <label>‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
            <textarea id="contract_note" class="form-control" rows="3"></textarea>
          </div>
        </div>

        <!-- Actions -->
        <div class="action-row" style="justify-content:flex-end; padding-top:0; border-top:none;">
          <button id="preview-contract-btn" class="btn btn-secondary">‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß PDF</button>
          <button id="save-contract-btn" class="btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤</button>
        </div>

      </div>
    </div>
  </div>

  <style>
    .section-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--gold-3);
    }
  </style>

  <!-- Preview Modal (Nested or Separate? Separate is better to avoid z-index hell) -->
  <div id="contract-preview-modal" class="modal preview-modal" style="z-index: 2100;">
    <div class="modal-content" style="max-width: 800px;">
      <button class="modal-close" id="preview-close">√ó</button>
      <div id="preview-actions" class="preview-actions"
        style="margin-bottom:1rem;display:flex;justify-content:flex-end;gap:0.5rem;">
        <button id="close-preview-btn" class="btn btn-secondary">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
        <button id="print-btn" class="btn">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå / Save PDF</button>
      </div>
      <div id="contract-preview" class="contract-preview" style="padding:2rem;background:#fff;"></div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div id="delete-modal" class="modal" style="z-index: 2200;">
    <div class="modal-content" style="max-width: 400px; text-align: center; padding: 2rem;">
      <div style="margin-bottom: 1.5rem; font-size: 3rem;">üóëÔ∏è</div>
      <h3>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö?</h3>
      <p class="text-muted" style="margin-bottom: 2rem;">
        ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?<br>‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ</p>
      <div class="grid grid-cols-2" style="gap: 1rem;">
        <button id="cancel-delete-btn" class="btn btn-secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button id="confirm-delete-btn" class="btn"
          style="background: #dc2626; color: white; border-color: #dc2626;">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö</button>
      </div>
    </div>
  </div>

  <!-- Restore Confirmation Modal -->
  <div id="restore-modal" class="modal" style="z-index: 2200;">
    <div class="modal-content" style="max-width: 400px; text-align: center; padding: 2rem;">
      <div style="margin-bottom: 1.5rem; font-size: 3rem;">‚ôªÔ∏è</div>
      <h3>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤?</h3>
      <p class="text-muted" style="margin-bottom: 2rem;">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏µ‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
      <div class="grid grid-cols-2" style="gap: 1rem;">
        <button id="cancel-restore-btn" class="btn btn-secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button id="confirm-restore-btn" class="btn"
          style="background: #22c55e; color: white; border-color: #22c55e;">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤</button>
      </div>
    </div>
  </div>

  <!-- ‡πÇ‡∏´‡∏•‡∏î header -->

  <script type="module" src="/js/pages/contract-list.page.js"></script>
</body>

</html>